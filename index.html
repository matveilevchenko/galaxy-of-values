<!DOCTYPE html>
<html lang="ru">
<head>
    <title>–ì–∞–ª–∞–∫—Ç–∏–∫–∞ –¶–µ–Ω–Ω–æ—Å—Ç–µ–π - –ì–∏–º–Ω–∞–∑–∏—è –∏–º. –ï.–ú. –ü—Ä–∏–º–∞–∫–æ–≤–∞</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è –≥–∞–ª–∞–∫—Ç–∏–∫–∞ —Ü–µ–Ω–Ω–æ—Å—Ç–µ–π —É—á–µ–Ω–∏–∫–æ–≤ –≥–∏–º–Ω–∞–∑–∏–∏">
    <style>
        * { 
            margin: 0; 
            padding: 0; 
            box-sizing: border-box; 
        }
        
        body { 
            background: #000; 
            color: white; 
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', sans-serif; 
            overflow: hidden; 
            cursor: default;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }
        
        canvas { 
            position: fixed; 
            top: 0; 
            left: 0; 
            width: 100vw; 
            height: 100vh; 
            z-index: 1;
            display: block;
        }
        
        .ui {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 100;
        }
        
        .ui > * {
            pointer-events: auto;
        }
        
        .loading {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: #ffdd00;
            font-size: clamp(18px, 4vw, 24px);
            text-align: center;
            background: linear-gradient(135deg, rgba(0, 0, 0, 0.95), rgba(20, 20, 40, 0.98));
            padding: clamp(20px, 5vw, 40px);
            border-radius: 20px;
            border: 3px solid;
            border-image: linear-gradient(45deg, #ffdd00, #ff8c00, #ffdd00) 1;
            animation: borderRotate 3s linear infinite;
            box-shadow: 0 0 60px rgba(255, 221, 0, 0.4);
            z-index: 1000;
            width: 90%;
            max-width: 600px;
        }
        
        @keyframes borderRotate {
            0% { border-image-source: linear-gradient(45deg, #ffdd00, #ff8c00, #ffdd00); }
            50% { border-image-source: linear-gradient(135deg, #ffdd00, #ff8c00, #ffdd00); }
            100% { border-image-source: linear-gradient(225deg, #ffdd00, #ff8c00, #ffdd00); }
        }
        
        .loading::after {
            content: '';
            display: block;
            width: 50px;
            height: 50px;
            margin: 30px auto;
            border: 4px solid rgba(255, 221, 0, 0.3);
            border-top-color: #ffdd00;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        .header {
            position: absolute;
            top: max(20px, 3vh);
            left: 50%;
            transform: translateX(-50%);
            background: linear-gradient(135deg, rgba(0, 0, 0, 0.9), rgba(20, 20, 40, 0.95));
            padding: clamp(15px, 3vw, 25px);
            border-radius: 15px;
            border: 2px solid;
            border-image: linear-gradient(45deg, rgba(255, 221, 0, 0.7), rgba(255, 140, 0, 0.5)) 1;
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.6), 0 5px 15px rgba(0, 0, 0, 0.4);
            z-index: 200;
            text-align: center;
            max-width: min(700px, 90vw);
            width: auto;
            backdrop-filter: blur(10px);
        }
        
        .header h1 {
            background: linear-gradient(45deg, #ffdd00, #ff8c00);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            font-size: clamp(22px, 5.5vw, 32px);
            margin-bottom: 8px;
            text-shadow: 0 0 15px rgba(255, 221, 0, 0.5);
            line-height: 1.2;
            font-weight: 800;
            letter-spacing: -0.5px;
        }
        
        .header p {
            color: #aaddff;
            font-size: clamp(15px, 3.5vw, 18px);
            line-height: 1.4;
            font-weight: 400;
            opacity: 0.9;
        }
        
        .controls {
            position: absolute;
            bottom: max(25px, 4vh);
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: clamp(12px, 2vw, 20px);
            background: rgba(0, 0, 0, 0.85);
            padding: clamp(15px, 3vw, 20px);
            border-radius: 20px;
            border: 2px solid rgba(255, 255, 255, 0.15);
            box-shadow: 0 0 50px rgba(0, 0, 0, 0.8);
            z-index: 200;
            flex-wrap: wrap;
            justify-content: center;
            width: 92%;
            max-width: 1000px;
            backdrop-filter: blur(10px);
        }
        
        .control-btn {
            background: linear-gradient(145deg, rgba(80, 80, 120, 0.95), rgba(50, 50, 80, 0.98));
            color: white;
            font-weight: 600;
            font-size: clamp(15px, 3.5vw, 19px);
            border: none;
            border-bottom: 3px solid rgba(255, 215, 0, 0.6);
            padding: clamp(16px, 2.5vw, 22px) clamp(28px, 4vw, 40px);
            border-radius: 16px;
            cursor: pointer;
            transition: all 0.3s ease;
            min-width: min(260px, 85vw);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.4), inset 0 1px 0 rgba(255, 255, 255, 0.1);
            flex: 1;
            white-space: nowrap;
            letter-spacing: 0.3px;
        }
        
        .control-btn:hover {
            background: linear-gradient(145deg, rgba(100, 100, 150, 0.95), rgba(70, 70, 110, 0.98));
            box-shadow: 0 8px 30px rgba(255, 215, 0, 0.4), inset 0 1px 0 rgba(255, 255, 255, 0.15);
            transform: translateY(-3px);
            border-bottom-color: rgba(255, 215, 0, 0.9);
        }
        
        .control-btn:active {
            transform: translateY(1px);
            box-shadow: 0 3px 15px rgba(0, 0, 0, 0.3), inset 0 1px 0 rgba(255, 255, 255, 0.05);
            border-bottom-width: 2px;
        }
        
        .stats-btn {
            background: linear-gradient(145deg, rgba(65, 105, 180, 0.95), rgba(45, 85, 160, 0.98));
            border-bottom: 3px solid rgba(65, 105, 225, 0.6);
        }
        
        .stats-btn:hover {
            background: linear-gradient(145deg, rgba(85, 125, 200, 0.95), rgba(65, 105, 180, 0.98));
            border-bottom-color: rgba(65, 105, 225, 0.9);
        }
        
        .info-btn {
            background: linear-gradient(145deg, rgba(50, 180, 50, 0.95), rgba(30, 160, 30, 0.98));
            border-bottom: 3px solid rgba(50, 205, 50, 0.6);
        }
        
        .info-btn:hover {
            background: linear-gradient(145deg, rgba(70, 200, 70, 0.95), rgba(50, 180, 50, 0.98));
            border-bottom-color: rgba(50, 205, 50, 0.9);
        }
        
        .tooltip {
            position: absolute;
            background: rgba(0, 0, 0, 0.97);
            color: white;
            padding: clamp(18px, 3vw, 24px);
            border-radius: 15px;
            font-size: clamp(15px, 3vw, 17px);
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.3s;
            border: 3px solid #ffdd00;
            box-shadow: 0 0 50px rgba(255, 221, 0, 0.4);
            max-width: min(380px, 90vw);
            z-index: 1000;
            line-height: 1.5;
            backdrop-filter: blur(10px);
        }
        
        .star-name {
            color: #ffdd00;
            font-weight: bold;
            margin-bottom: 12px;
            font-size: clamp(19px, 4.5vw, 24px);
            text-shadow: 0 0 15px rgba(255, 221, 0, 0.5);
        }
        
        .star-info {
            color: #aaddff;
            font-size: clamp(14px, 3vw, 16px);
            margin-bottom: 8px;
            line-height: 1.4;
        }
        
        .cursor-glow {
            position: absolute;
            width: 80px;
            height: 80px;
            border-radius: 50%;
            background: radial-gradient(circle, rgba(255, 221, 0, 0.8) 0%, transparent 70%);
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.3s;
            z-index: 50;
            filter: blur(3px);
        }
        
        .overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.98);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 10000;
            padding: 20px;
            overflow-y: auto;
            overflow-x: hidden;
        }
        
        .modal-container {
            background: linear-gradient(135deg, rgba(20, 20, 40, 0.98), rgba(15, 15, 35, 0.99));
            padding: clamp(25px, 5vw, 40px);
            border-radius: 20px;
            width: 100%;
            max-width: min(800px, 95vw);
            border: 2px solid;
            border-image: linear-gradient(45deg, rgba(255, 215, 0, 0.6), rgba(65, 105, 225, 0.6)) 1;
            box-shadow: 0 25px 70px rgba(0, 0, 0, 0.8), inset 0 1px 0 rgba(255, 255, 255, 0.1);
            max-height: 85vh;
            overflow-y: auto;
            overflow-x: hidden;
            margin: auto;
            position: relative;
        }
        
        .modal-container::before {
            content: '';
            position: absolute;
            top: -2px;
            left: -2px;
            right: -2px;
            bottom: -2px;
            background: linear-gradient(45deg, transparent, rgba(255, 215, 0, 0.1), transparent);
            border-radius: 22px;
            z-index: -1;
            animation: borderGlow 4s ease-in-out infinite;
        }
        
        @keyframes borderGlow {
            0%, 100% { opacity: 0.3; }
            50% { opacity: 0.7; }
        }
        
        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: clamp(25px, 4vw, 40px);
            flex-wrap: wrap;
            gap: 15px;
        }
        
        .modal-header h2 {
            color: #ffd700;
            font-size: clamp(26px, 5.5vw, 34px);
            text-shadow: 0 0 15px rgba(255, 215, 0, 0.5);
            flex: 1;
            min-width: 200px;
            line-height: 1.2;
        }
        
        .close-btn {
            background: linear-gradient(145deg, rgba(255, 80, 80, 0.95), rgba(220, 60, 60, 0.98));
            color: white;
            border: none;
            width: 48px;
            height: 48px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 26px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            flex-shrink: 0;
            border-bottom: 3px solid rgba(255, 0, 0, 0.6);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.4);
            position: relative;
            z-index: 10;
        }
        
        .close-btn:hover {
            background: linear-gradient(145deg, rgba(255, 100, 100, 0.95), rgba(240, 80, 80, 0.98));
            border-bottom-color: rgba(255, 50, 50, 0.9);
            box-shadow: 0 0 25px rgba(255, 100, 100, 0.8);
            transform: scale(1.1);
        }
        
        .close-btn:active {
            transform: scale(0.95);
        }
        
        .form-group {
            margin-bottom: 28px;
            width: 100%;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 14px;
            color: #ffd700;
            font-weight: bold;
            font-size: clamp(17px, 3.5vw, 20px);
            width: 100%;
        }
        
        .form-group input,
        .form-group textarea,
        .form-group select {
            width: 100%;
            padding: clamp(14px, 2.5vw, 18px);
            background: rgba(10, 10, 20, 0.9);
            border: 2px solid rgba(65, 105, 225, 0.5);
            border-radius: 12px;
            color: white;
            font-size: clamp(15px, 3vw, 18px);
            transition: all 0.3s;
            appearance: none;
            -webkit-appearance: none;
            -moz-appearance: none;
            box-shadow: inset 0 2px 8px rgba(0, 0, 0, 0.6), 0 3px 10px rgba(0, 0, 0, 0.3);
            font-family: inherit;
        }
        
        .form-group select {
            background: rgba(10, 10, 20, 0.9) url("data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='white'%3e%3cpath d='M7 10l5 5 5-5z'/%3e%3c/svg%3e") no-repeat right 15px center;
            background-size: 20px;
            padding-right: 50px;
        }
        
        .form-group input:focus,
        .form-group textarea:focus,
        .form-group select:focus {
            outline: none;
            border-color: rgba(255, 215, 0, 0.8);
            box-shadow: inset 0 2px 8px rgba(0, 0, 0, 0.6), 0 0 25px rgba(255, 215, 0, 0.3);
            background: rgba(15, 15, 25, 0.95);
        }
        
        .form-group textarea {
            min-height: 120px;
            resize: vertical;
            font-family: inherit;
        }
        
        .required::after {
            content: " *";
            color: #ff4444;
        }
        
        .value-options {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 14px;
            margin-top: 14px;
            width: 100%;
        }
        
        .value-option {
            padding: clamp(16px, 2.5vw, 22px);
            background: linear-gradient(135deg, rgba(40, 40, 70, 0.8), rgba(30, 30, 60, 0.9));
            border: 2px solid rgba(65, 105, 225, 0.4);
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            text-align: center;
            font-weight: bold;
            color: white;
            font-size: clamp(15px, 3vw, 17px);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.4), inset 0 1px 0 rgba(255, 255, 255, 0.05);
        }
        
        .value-option:hover {
            border-color: rgba(255, 215, 0, 0.6);
            background: linear-gradient(135deg, rgba(60, 60, 100, 0.8), rgba(50, 50, 90, 0.9));
            transform: translateY(-3px);
        }
        
        .value-option.selected {
            background: linear-gradient(135deg, rgba(255, 215, 0, 0.2), rgba(255, 185, 0, 0.3));
            border-color: rgba(255, 215, 0, 0.8);
            box-shadow: 0 8px 25px rgba(255, 215, 0, 0.4), 0 4px 15px rgba(0, 0, 0, 0.3), inset 0 1px 0 rgba(255, 255, 255, 0.1);
            transform: scale(1.03);
            color: #ffdd00 !important;
            text-shadow: 0 0 10px rgba(255, 221, 0, 0.5);
        }
        
        .submit-btn {
            width: 100%;
            background: linear-gradient(45deg, #32cd32, #00ced1);
            color: black;
            border: none;
            padding: clamp(18px, 3vw, 24px);
            border-radius: 12px;
            font-size: clamp(17px, 3.5vw, 22px);
            font-weight: bold;
            cursor: pointer;
            margin-top: 30px;
            transition: all 0.3s;
            border-bottom: 3px solid rgba(0, 200, 200, 0.6);
            box-shadow: 0 6px 25px rgba(0, 0, 0, 0.4);
            display: block;
            letter-spacing: 0.5px;
        }
        
        .submit-btn:hover {
            transform: translateY(-4px);
            box-shadow: 0 12px 35px rgba(50, 205, 50, 0.5);
            border-bottom-color: rgba(0, 230, 230, 0.9);
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
            gap: 22px;
            margin-bottom: 35px;
            width: 100%;
        }
        
        .stat-card {
            background: linear-gradient(135deg, rgba(30, 30, 50, 0.9), rgba(20, 20, 40, 0.95));
            padding: 22px;
            border-radius: 16px;
            border: 2px solid rgba(255, 215, 0, 0.3);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5), inset 0 1px 0 rgba(255, 255, 255, 0.05);
            transition: all 0.3s ease;
            width: 100%;
        }
        
        .stat-card:hover {
            transform: translateY(-3px);
            border-color: rgba(255, 215, 0, 0.6);
            box-shadow: 0 15px 40px rgba(255, 215, 0, 0.2), 0 8px 20px rgba(0, 0, 0, 0.3);
        }
        
        .stat-card h3 {
            color: #ffd700;
            margin-bottom: 14px;
            font-size: clamp(17px, 3.5vw, 21px);
        }
        
        .stat-value {
            font-size: clamp(26px, 6.5vw, 40px);
            font-weight: bold;
            color: #aaddff;
            text-shadow: 0 0 12px rgba(170, 221, 255, 0.5);
            line-height: 1.2;
            min-height: 50px;
            display: flex;
            align-items: center;
        }
        
        .info-container h2 {
            color: #32cd32;
            font-size: clamp(26px, 5.5vw, 34px);
            margin-bottom: 30px;
            text-shadow: 0 0 15px rgba(50, 205, 50, 0.5);
        }
        
        .info-container h3 {
            color: #ffd700;
            margin: 25px 0 15px 0;
            font-size: clamp(20px, 4.5vw, 25px);
        }
        
        .info-container p,
        .info-container li {
            color: #aaddff;
            font-size: clamp(15px, 3vw, 18px);
            line-height: 1.6;
            margin-bottom: 12px;
        }
        
        .info-container ul {
            margin-left: 25px;
            margin-bottom: 25px;
        }
        
        .info-container li {
            margin-bottom: 10px;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .modal-container {
            animation: fadeIn 0.3s ease-out;
        }
        
        .distribution-list {
            max-height: 320px;
            overflow-y: auto;
            padding-right: 12px;
        }
        
        .distribution-item {
            display: flex;
            align-items: center;
            margin-bottom: 10px;
            padding: 10px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
            font-size: clamp(14px, 2.5vw, 16px);
        }
        
        /* –°–∫—Ä—ã—Ç—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã –¥–ª—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ (—Ç–æ–ª—å–∫–æ –¥–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞) */
        .admin-panel {
            position: fixed;
            bottom: 10px;
            right: 10px;
            z-index: 9999;
            display: none;
        }
        
        .admin-btn {
            background: rgba(255, 0, 0, 0.3);
            color: white;
            border: 1px solid red;
            padding: 8px 12px;
            border-radius: 5px;
            font-size: 12px;
            cursor: pointer;
        }
        
        @media (max-width: 480px) {
            .controls {
                flex-direction: column;
                gap: 10px;
                width: 94%;
                padding: 15px;
                bottom: 15px;
            }
            
            .control-btn {
                min-width: 100%;
                padding: 18px 20px;
                font-size: 16px;
                border-radius: 14px;
            }
            
            .value-options {
                grid-template-columns: 1fr;
                gap: 10px;
            }
            
            .header {
                padding: 15px;
                width: 94%;
                border-radius: 12px;
                top: 15px;
            }
            
            .modal-container {
                padding: 20px;
                border-radius: 18px;
                max-height: 80vh;
            }
            
            .close-btn {
                width: 44px;
                height: 44px;
                font-size: 24px;
            }
            
            .loading {
                padding: 20px;
            }
            
            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
                gap: 12px;
            }
            
            .stat-card {
                padding: 18px;
            }
            
            .submit-btn {
                padding: 20px;
                font-size: 18px;
            }
        }
        
        @media (min-width: 481px) and (max-width: 768px) {
            .controls {
                gap: 15px;
                padding: 18px;
            }
            
            .control-btn {
                min-width: 200px;
                font-size: 17px;
                padding: 18px 25px;
            }
            
            .value-options {
                grid-template-columns: repeat(2, 1fr);
                gap: 12px;
            }
            
            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
                gap: 18px;
            }
            
            .header {
                padding: 20px;
            }
        }
        
        @media (max-height: 600px) and (orientation: landscape) {
            .header {
                top: 10px;
                padding: 10px;
                max-width: 85vw;
            }
            
            .controls {
                bottom: 10px;
                padding: 12px;
                max-width: 95vw;
            }
            
            .control-btn {
                padding: 12px 16px;
                font-size: 14px;
                min-width: 180px;
            }
            
            .loading {
                padding: 15px;
                font-size: 16px;
            }
            
            .modal-container {
                max-height: 75vh;
                padding: 15px;
            }
            
            .close-btn {
                width: 40px;
                height: 40px;
                font-size: 22px;
            }
        }
        
        @media (prefers-color-scheme: dark) {
            body {
                background: #000;
            }
        }
        
        ::-webkit-scrollbar {
            width: 8px;
        }
        
        ::-webkit-scrollbar-track {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 4px;
        }
        
        ::-webkit-scrollbar-thumb {
            background: linear-gradient(45deg, #ffd700, #ff8c00);
            border-radius: 4px;
        }
        
        ::-webkit-scrollbar-thumb:hover {
            background: linear-gradient(45deg, #ffed4e, #ffaa33);
        }
    </style>
</head>
<body>
    <canvas id="canvas"></canvas>
    <div class="cursor-glow" id="cursorGlow"></div>
    
    <div class="ui">
        <div class="loading" id="loading">
            üöÄ –ó–∞–≥—Ä—É–∂–∞–µ–º –ì–∞–ª–∞–∫—Ç–∏–∫—É –¶–µ–Ω–Ω–æ—Å—Ç–µ–π...
            <div style="font-size: clamp(15px, 3.5vw, 18px); margin-top: 20px; color: #aaddff;">
                –ü—Ä–æ–µ–∫—Ç "–ú–æ–π –º–∏—Ä —Ü–µ–Ω–Ω–æ—Å—Ç–µ–π"<br>
                –ì–∏–º–Ω–∞–∑–∏—è –∏–º. –ï.–ú. –ü—Ä–∏–º–∞–∫–æ–≤–∞
            </div>
        </div>
        
        <div class="header">
            <h1>‚ú® –ì–ê–õ–ê–ö–¢–ò–ö–ê –¶–ï–ù–ù–û–°–¢–ï–ô ‚ú®</h1>
            <p>–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π –º—É–∑–µ–π "–ú–æ–π –º–∏—Ä —Ü–µ–Ω–Ω–æ—Å—Ç–µ–π"<br>
            –ù–∞–≤–µ–¥–∏ –Ω–∞ –∑–≤–µ–∑–¥—É, —á—Ç–æ–±—ã —É–∑–Ω–∞—Ç—å —á—Ç–æ —Ü–µ–Ω–Ω–æ –¥–ª—è —É—á–µ–Ω–∏–∫–∞ –ì–∏–º–Ω–∞–∑–∏–∏ –∏–º. –ï.–ú. –ü—Ä–∏–º–∞–∫–æ–≤–∞</p>
        </div>
        
        <div class="controls">
            <button class="control-btn" onclick="openForm()">‚≠ê –î–û–ë–ê–í–ò–¢–¨ –°–í–û–Æ –ó–í–ï–ó–î–£</button>
            <button class="control-btn stats-btn" onclick="openStats()">üìä –ú–û–Ø –°–¢–ê–¢–ò–°–¢–ò–ö–ê</button>
            <button class="control-btn info-btn" onclick="openInfo()">‚ÑπÔ∏è –û –ü–†–û–ï–ö–¢–ï</button>
        </div>
        
        <div class="tooltip" id="tooltip"></div>
    </div>

    <!-- –§–æ—Ä–º–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –∑–≤–µ–∑–¥—ã -->
    <div class="overlay" id="formOverlay">
        <div class="modal-container">
            <div class="modal-header">
                <h2>‚≠ê –î–û–ë–ê–í–õ–ï–ù–ò–ï –ó–í–ï–ó–î–´</h2>
                <button class="close-btn" onclick="closeForm()">√ó</button>
            </div>
            <form id="starForm">
                <div class="form-group">
                    <label for="studentName" class="required">1. –ö–∞–∫ —Ç–µ–±—è –∑–æ–≤—É—Ç?</label>
                    <input type="text" id="studentName" required placeholder="–í–≤–µ–¥–∏ —Å–≤–æ—ë –∏–º—è –∏ —Ñ–∞–º–∏–ª–∏—é">
                </div>
                
                <div class="form-group">
                    <label for="studentClass" class="required">2. –ò–∑ –∫–∞–∫–æ–≥–æ —Ç—ã –∫–ª–∞—Å—Å–∞?</label>
                    <select id="studentClass" required>
                        <option value="">–í—ã–±–µ—Ä–∏ –∫–ª–∞—Å—Å</option>
                        <option value="1">1 –∫–ª–∞—Å—Å</option>
                        <option value="2">2 –∫–ª–∞—Å—Å</option>
                        <option value="3">3 –∫–ª–∞—Å—Å</option>
                        <option value="4">4 –∫–ª–∞—Å—Å</option>
                        <option value="5">5 –∫–ª–∞—Å—Å</option>
                        <option value="6">6 –∫–ª–∞—Å—Å</option>
                        <option value="7">7 –∫–ª–∞—Å—Å</option>
                        <option value="8">8 –∫–ª–∞—Å—Å</option>
                        <option value="9">9 –∫–ª–∞—Å—Å</option>
                        <option value="10">10 –∫–ª–∞—Å—Å</option>
                        <option value="11">11 –∫–ª–∞—Å—Å</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label class="required">3. –ö–∞–∫–∞—è —Ü–µ–Ω–Ω–æ—Å—Ç—å –¥–ª—è —Ç–µ–±—è —Å–∞–º–∞—è –≤–∞–∂–Ω–∞—è?</label>
                    <div class="value-options" id="valueOptions">
                        <div class="value-option" data-value="–£–≤–∞–∂–µ–Ω–∏–µ">–£–≤–∞–∂–µ–Ω–∏–µ</div>
                        <div class="value-option" data-value="–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å">–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å</div>
                        <div class="value-option" data-value="–î—Ä—É–∂–±–∞">–î—Ä—É–∂–±–∞</div>
                        <div class="value-option" data-value="–°–ø—Ä–∞–≤–µ–¥–ª–∏–≤–æ—Å—Ç—å">–°–ø—Ä–∞–≤–µ–¥–ª–∏–≤–æ—Å—Ç—å</div>
                        <div class="value-option" data-value="–°–ø–æ—Ä—Ç">–°–ø–æ—Ä—Ç</div>
                        <div class="value-option" data-value="–°–≤–æ–±–æ–¥–∞">–°–≤–æ–±–æ–¥–∞</div>
                        <div class="value-option" id="otherOption">–î—Ä—É–≥–æ–π –≤–∞—Ä–∏–∞–Ω—Ç</div>
                    </div>
                    <input type="text" id="customValue" placeholder="–í–≤–µ–¥–∏ —Å–≤–æ—é —Ü–µ–Ω–Ω–æ—Å—Ç—å" style="display: none; margin-top: 15px;">
                    <input type="hidden" id="selectedValue" required>
                </div>
                
                <div class="form-group">
                    <label for="valueReason" class="required">4. –ü–æ—á–µ–º—É —ç—Ç–∞ —Ü–µ–Ω–Ω–æ—Å—Ç—å –≤–∞–∂–Ω–∞ –¥–ª—è —Ç–µ–±—è?</label>
                    <textarea id="valueReason" required placeholder="–û–±—ä—è—Å–Ω–∏, –ø–æ—á–µ–º—É —Ç—ã –≤—ã–±—Ä–∞–ª(–∞) –∏–º–µ–Ω–Ω–æ —ç—Ç—É —Ü–µ–Ω–Ω–æ—Å—Ç—å. –ß—Ç–æ –æ–Ω–∞ –¥–ª—è —Ç–µ–±—è –∑–Ω–∞—á–∏—Ç?"></textarea>
                </div>
                
                <button type="submit" class="submit-btn">‚ú® –°–û–ó–î–ê–¢–¨ –°–í–û–Æ –ó–í–ï–ó–î–£</button>
            </form>
        </div>
    </div>

    <!-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ -->
    <div class="overlay" id="statsOverlay">
        <div class="modal-container">
            <div class="modal-header">
                <h2>üìä –ú–û–Ø –°–¢–ê–¢–ò–°–¢–ò–ö–ê –¶–ï–ù–ù–û–°–¢–ï–ô</h2>
                <button class="close-btn" onclick="closeStats()">√ó</button>
            </div>
            <div class="stats-grid">
                <div class="stat-card">
                    <h3>–ú–æ–∏ –∑–≤—ë–∑–¥—ã</h3>
                    <div class="stat-value" id="totalStars">0</div>
                </div>
                <div class="stat-card">
                    <h3>–ú–æ–π –∫–ª–∞—Å—Å</h3>
                    <div class="stat-value" id="myClass">-</div>
                </div>
                <div class="stat-card">
                    <h3>–ú–æ—è –≥–ª–∞–≤–Ω–∞—è —Ü–µ–Ω–Ω–æ—Å—Ç—å</h3>
                    <div class="stat-value" id="myMainValue">-</div>
                </div>
                <div class="stat-card">
                    <h3>–ú–æ–π –ø–µ—Ä–≤—ã–π –≤–∫–ª–∞–¥</h3>
                    <div class="stat-value" id="firstContribution">-</div>
                </div>
            </div>
            <div class="stat-card">
                <h3>–ú–æ–∏ —Ü–µ–Ω–Ω–æ—Å—Ç–∏</h3>
                <div class="distribution-list" id="myValuesDistribution">–î–∞–Ω–Ω—ã–µ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è...</div>
            </div>
            <div class="stat-card">
                <h3>–ö–∞–∫ –¥–æ–±–∞–≤–∏—Ç—å –≤ –æ–±—â—É—é –≥–∞–ª–∞–∫—Ç–∏–∫—É?</h3>
                <div style="padding: 15px; color: #aaddff; font-size: clamp(15px, 3vw, 17px); line-height: 1.5;">
                    <p>üìù –ß—Ç–æ–±—ã —Ç–≤–æ—è –∑–≤–µ–∑–¥–∞ –ø–æ–ø–∞–ª–∞ –≤ <strong>–æ–±—â—É—é –≥–∞–ª–∞–∫—Ç–∏–∫—É</strong> –≤—Å–µ–π –≥–∏–º–Ω–∞–∑–∏–∏, –∑–∞–ø–æ–ª–Ω–∏ —Ç–∞–∫–∂–µ:</p>
                    <p style="margin: 15px 0; text-align: center;">
                        <a href="#" onclick="openGoogleForm(); return false;" style="color: #ffdd00; text-decoration: none; font-weight: bold; font-size: clamp(16px, 3.5vw, 20px);">
                            üìã GOOGLE –§–û–†–ú–£ –î–õ–Ø –ö–õ–ê–°–°–ê
                        </a>
                    </p>
                    <p>üåü <strong>–í –æ–±—â–µ–π –≥–∞–ª–∞–∫—Ç–∏–∫–µ</strong> —Ç—ã —É–≤–∏–¥–∏—à—å –∑–≤—ë–∑–¥—ã –≤—Å–µ—Ö —É—á–µ–Ω–∏–∫–æ–≤ –≥–∏–º–Ω–∞–∑–∏–∏!</p>
                    <p>‚ú® <strong>–í –ª–∏—á–Ω–æ–π –≥–∞–ª–∞–∫—Ç–∏–∫–µ</strong> —Ç—ã –≤–∏–¥–∏—à—å —Ç–æ–ª—å–∫–æ —Å–≤–æ–∏ –∑–≤—ë–∑–¥—ã –¥–ª—è —Å–∞–º–æ–ø–æ–∑–Ω–∞–Ω–∏—è.</p>
                </div>
            </div>
        </div>
    </div>

    <!-- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø—Ä–æ–µ–∫—Ç–µ -->
    <div class="overlay" id="infoOverlay">
        <div class="modal-container">
            <div class="modal-header">
                <h2>‚ÑπÔ∏è –û –ü–†–û–ï–ö–¢–ï "–ú–û–ô –ú–ò–† –¶–ï–ù–ù–û–°–¢–ï–ô"</h2>
                <button class="close-btn" onclick="closeInfo()">√ó</button>
            </div>
            
            <h3>‚ú® –¶–∏—Ñ—Ä–æ–≤–∞—è –≥–∞–ª–∞–∫—Ç–∏–∫–∞ —Ü–µ–Ω–Ω–æ—Å—Ç–µ–π</h3>
            <p>–ü–µ—Ä–µ–¥ —Ç–æ–±–æ–π –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π –º—É–∑–µ–π –Ω–∞—à–µ–π –≥–∏–º–Ω–∞–∑–∏–∏, –≥–¥–µ –∫–∞–∂–¥—ã–π –æ—Ç–≤–µ—Ç –ø—Ä–µ–≤—Ä–∞—â–∞–µ—Ç—Å—è –≤ 3D-–∑–≤–µ–∑–¥—É üí´</p>
            
            <p><strong>–¢–≤–æ—ë –º–Ω–µ–Ω–∏–µ ‚Üí –∞–Ω–∏–º–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –∑–≤–µ–∑–¥–∞ –≤ –∫–æ—Å–º–æ—Å–µ ‚≠êÔ∏è</strong></p>
            <p>–î–æ–±–∞–≤–ª—è–π —Å–≤–æ—é –∑–≤–µ–∑–¥—É –∏ —Å—Ç–∞–Ω–æ–≤–∏—Å—å —á–∞—Å—Ç—å—é –∏—Å—Ç–æ—Ä–∏–∏ –≥–∏–º–Ω–∞–∑–∏–∏!</p>
            
            <h3>üéØ –¶–µ–ª—å –ø—Ä–æ–µ–∫—Ç–∞</h3>
            <p>¬´–ú–æ–π –º–∏—Ä —Ü–µ–Ω–Ω–æ—Å—Ç–µ–π¬ª ‚Äî —ç—Ç–æ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ, –∫–æ—Ç–æ—Ä–æ–µ –≤–∏–∑—É–∞–ª–∏–∑–∏—Ä—É–µ—Ç –ª–∏—á–Ω—ã–µ —Ü–µ–Ω–Ω–æ—Å—Ç–∏ —É—á–µ–Ω–∏–∫–æ–≤ –Ω–∞—à–µ–π –≥–∏–º–Ω–∞–∑–∏–∏. –ö–∞–∂–¥–∞—è –∑–≤–µ–∑–¥–∞ –≤ —ç—Ç–æ–π –≥–∞–ª–∞–∫—Ç–∏–∫–µ ‚Äî —ç—Ç–æ –≥–æ–ª–æ—Å –æ—Ç–¥–µ–ª—å–Ω–æ–≥–æ —á–µ–ª–æ–≤–µ–∫–∞, –µ–≥–æ –º—ã—Å–ª–∏ –∏ —É–±–µ–∂–¥–µ–Ω–∏—è.</p>
            
            <h3>üë§ –ê–≤—Ç–æ—Ä –ø—Ä–æ–µ–∫—Ç–∞</h3>
            <p>–õ–µ–≤—á–µ–Ω–∫–æ –ú–∞—Ç–≤–µ–π –í—è—á–µ—Å–ª–∞–≤–æ–≤–∏—á, 6 –ê –∫–ª–∞—Å—Å</p>
            
            <h3>üë®‚Äçüè´ –ù–∞—É—á–Ω—ã–π —Ä—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª—å</h3>
            <p>–ó—ã–∫–æ–≤ –ú–∏—Ö–∞–∏–ª –ê–Ω–∞—Ç–æ–ª—å–µ–≤–∏—á</p>
            
            <h3>üè´ –ì–∏–º–Ω–∞–∑–∏—è –∏–º. –ï.–ú. –ü—Ä–∏–º–∞–∫–æ–≤–∞</h3>
            
            <h3>üí° –ö–∞–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è</h3>
            <ul>
                <li><strong>–õ–∏—á–Ω–∞—è –≥–∞–ª–∞–∫—Ç–∏–∫–∞:</strong> –ù–∞–∂–º–∏ "–î–æ–±–∞–≤–∏—Ç—å —Å–≤–æ—é –∑–≤–µ–∑–¥—É" –¥–ª—è —Å–∞–º–æ–ø–æ–∑–Ω–∞–Ω–∏—è</li>
                <li><strong>–û–±—â–∞—è –≥–∞–ª–∞–∫—Ç–∏–∫–∞:</strong> –ó–∞–ø–æ–ª–Ω–∏ Google –§–æ—Ä–º—É, —á—Ç–æ–±—ã —É—á–∞—Å—Ç–≤–æ–≤–∞—Ç—å –≤ –æ–±—â–µ–º –ø—Ä–æ–µ–∫—Ç–µ –∫–ª–∞—Å—Å–∞</li>
                <li>–ù–∞–≤–µ–¥–∏ –∫—É—Ä—Å–æ—Ä –Ω–∞ –ª—é–±—É—é –∑–≤–µ–∑–¥—É, —á—Ç–æ–±—ã —É–∑–Ω–∞—Ç—å –æ —Ü–µ–Ω–Ω–æ—Å—Ç—è—Ö</li>
                <li>–ò–∑—É—á–∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É, —á—Ç–æ–±—ã —É–≤–∏–¥–µ—Ç—å —Å–≤–æ–∏ –ø—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏—è</li>
                <li>–ü–æ–¥–µ–ª–∏—Å—å –ø—Ä–æ–µ–∫—Ç–æ–º —Å –¥—Ä—É–∑—å—è–º–∏ –∏ –æ–¥–Ω–æ–∫–ª–∞—Å—Å–Ω–∏–∫–∞–º–∏</li>
            </ul>
            
            <h3>üìä –î–≤–µ –≥–∞–ª–∞–∫—Ç–∏–∫–∏</h3>
            <p><strong>1. –õ–∏—á–Ω–∞—è –≥–∞–ª–∞–∫—Ç–∏–∫–∞:</strong> –¢–æ–ª—å–∫–æ —Ç–≤–æ–∏ –∑–≤—ë–∑–¥—ã. –î–ª—è —Ä–µ—Ñ–ª–µ–∫—Å–∏–∏ –∏ —Å–∞–º–æ–ø–æ–∑–Ω–∞–Ω–∏—è.</p>
            <p><strong>2. –û–±—â–∞—è –≥–∞–ª–∞–∫—Ç–∏–∫–∞:</strong> –ó–≤—ë–∑–¥—ã –≤—Å–µ–π –≥–∏–º–Ω–∞–∑–∏–∏. –î–ª—è –¥–∏–∞–ª–æ–≥–∞ –∏ –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è —Ü–µ–Ω–Ω–æ—Å—Ç–µ–π —Å–æ–æ–±—â–µ—Å—Ç–≤–∞.</p>
            
            <div style="margin-top: 30px; padding: 20px; background: rgba(255, 215, 0, 0.1); border-radius: 12px; border-left: 4px solid #ffd700;">
                <p style="color: #ffd700; font-weight: bold; font-size: clamp(16px, 3.5vw, 18px); line-height: 1.5;">
                    "–≠—Ç–æ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è –¥–∏–∞–ª–æ–≥–∞ –∏ —Å–∞–º–æ–ø–æ–∑–Ω–∞–Ω–∏—è –≤—Å–µ–≥–æ –Ω–∞—à–µ–≥–æ —Å–æ–æ–±—â–µ—Å—Ç–≤–∞ –≥–∏–º–Ω–∞–∑–∏—Å—Ç–æ–≤. –ó–¥–µ—Å—å –∫–∞–∂–¥—ã–π –≥–æ–ª–æ—Å –≤–∞–∂–µ–Ω, –∫–∞–∂–¥–∞—è —Ü–µ–Ω–Ω–æ—Å—Ç—å –∏–º–µ–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ."
                </p>
                <p style="color: #aaddff; font-size: clamp(14px, 3vw, 16px); margin-top: 12px;">
                    –õ–µ–≤—á–µ–Ω–∫–æ –ú–∞—Ç–≤–µ–π, –∞–≤—Ç–æ—Ä –ø—Ä–æ–µ–∫—Ç–∞, 6 –ê –∫–ª–∞—Å—Å
                </p>
            </div>
            
            <div style="margin-top: 30px; padding: 20px; background: rgba(65, 105, 225, 0.1); border-radius: 12px; border-left: 4px solid #4169e1;">
                <h4 style="color: #aaddff; margin-bottom: 10px;">üìù –î–ª—è —É—á–∞—Å—Ç–∏—è –≤ –æ–±—â–µ–π –≥–∞–ª–∞–∫—Ç–∏–∫–µ:</h4>
                <p style="color: #aaddff; font-size: clamp(14px, 3vw, 16px);">
                    –ó–∞–ø–æ–ª–Ω–∏ Google –§–æ—Ä–º—É, –∫–æ—Ç–æ—Ä—É—é –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–∏—Ç –∫–ª–∞—Å—Å–Ω—ã–π —Ä—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª—å. 
                    –ü–æ—Å–ª–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ç–≤–æ—è –∑–≤–µ–∑–¥–∞ –ø–æ—è–≤–∏—Ç—Å—è –≤ –æ–±—â–µ–π –≥–∞–ª–∞–∫—Ç–∏–∫–µ –≤—Å–µ–π –≥–∏–º–Ω–∞–∑–∏–∏!
                </p>
            </div>
        </div>
    </div>

    <!-- –°–∫—Ä—ã—Ç–∞—è –ø–∞–Ω–µ–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ -->
    <div class="admin-panel" id="adminPanel">
        <button class="admin-btn" onclick="showAdminPanel()">–ê–¥–º–∏–Ω</button>
    </div>

    <script>
        // –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
        const CONFIG = {
            INITIAL_STARS: 50,
            MAX_STAR_SIZE: 6,
            MIN_STAR_SIZE: 2,
            HOVER_SCALE: 1.5,
            HOVER_GLOW_INTENSITY: 2.0,
            BACKGROUND_STARS: 400,
            TWINKLE_SPEED: 0.02,
            TWINKLE_AMPLITUDE: 0.3,
            VALUE_COLORS: {
                '–£–≤–∞–∂–µ–Ω–∏–µ': '#ff6666',
                '–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å': '#6699ff',
                '–î—Ä—É–∂–±–∞': '#ff9900',
                '–°–ø—Ä–∞–≤–µ–¥–ª–∏–≤–æ—Å—Ç—å': '#32cd32',
                '–°–ø–æ—Ä—Ç': '#9370db',
                '–°–≤–æ–±–æ–¥–∞': '#ff66ff',
                '–î—Ä—É–≥–æ–π': '#ffdd00'
            },
            GOOGLE_FORM_URL: '' // –£–∫–∞–∂–∏—Ç–µ —Å—Å—ã–ª–∫—É –Ω–∞ Google –§–æ—Ä–º—É
        };
        
        // –≠–ª–µ–º–µ–Ω—Ç—ã DOM
        const canvas = document.getElementById('canvas');
        const ctx = canvas.getContext('2d');
        const tooltip = document.getElementById('tooltip');
        const cursorGlow = document.getElementById('cursorGlow');
        
        // –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
        let stars = [];
        let userStars = JSON.parse(localStorage.getItem('gymnasiumValues')) || [];
        let particles = [];
        let mouseX = 0;
        let mouseY = 0;
        let hoveredStar = null;
        let animationId = null;
        let devicePixelRatio = window.devicePixelRatio || 1;
        
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
        function init() {
            setupCanvas();
            createStars(CONFIG.INITIAL_STARS);
            createBackgroundStars(CONFIG.BACKGROUND_STARS);
            loadUserStars();
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∑–∞–≥—Ä—É–∑–∫—É
            setTimeout(() => {
                const loading = document.getElementById('loading');
                loading.style.opacity = '0';
                setTimeout(() => {
                    loading.style.display = 'none';
                    animate();
                }, 300);
            }, 1500);
            
            // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π
            window.addEventListener('resize', setupCanvas);
            canvas.addEventListener('mousemove', handleMouseMove);
            canvas.addEventListener('mouseleave', handleMouseLeave);
            canvas.addEventListener('click', handleStarClick);
            
            if ('ontouchstart' in window) {
                canvas.addEventListener('touchstart', handleTouch, { passive: true });
                canvas.addEventListener('touchmove', handleTouch, { passive: true });
                optimizeForMobile();
            }
            
            setupForm();
            updateStats();
            checkForAutoImport();
        }
        
        function setupCanvas() {
            const width = window.innerWidth;
            const height = window.innerHeight;
            
            canvas.width = width * devicePixelRatio;
            canvas.height = height * devicePixelRatio;
            canvas.style.width = width + 'px';
            canvas.style.height = height + 'px';
            
            ctx.scale(devicePixelRatio, devicePixelRatio);
        }
        
        function createStars(count) {
            for (let i = 0; i < count; i++) {
                const size = CONFIG.MIN_STAR_SIZE + Math.random() * (CONFIG.MAX_STAR_SIZE - CONFIG.MIN_STAR_SIZE);
                const x = Math.random() * canvas.width / devicePixelRatio;
                const y = Math.random() * canvas.height / devicePixelRatio;
                
                stars.push({
                    id: i,
                    x: x,
                    y: y,
                    originalX: x,
                    originalY: y,
                    baseSize: size,
                    currentSize: size,
                    targetSize: size,
                    color: getRandomStarColor(),
                    speed: 0.02 + Math.random() * 0.1,
                    angle: Math.random() * Math.PI * 2,
                    rotation: 0,
                    rotationSpeed: (Math.random() - 0.5) * 0.01,
                    pulse: Math.random() * Math.PI * 2,
                    pulseSpeed: 0.005 + Math.random() * 0.01,
                    glow: 0,
                    targetGlow: 0,
                    hoverScale: 1,
                    targetHoverScale: 1,
                    isHovered: false,
                    distanceToMouse: Infinity,
                    lastClickTime: 0,
                    twinkle: Math.random() * Math.PI * 2,
                    twinkleSpeed: 0.005 + Math.random() * 0.01
                });
            }
        }
        
        function getRandomStarColor() {
            const colors = Object.values(CONFIG.VALUE_COLORS);
            return colors[Math.floor(Math.random() * colors.length)];
        }
        
        function loadUserStars() {
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –µ—Å—Ç—å –ª–∏ —É–∂–µ –∑–≤–µ–∑–¥–∞ –ú–∞—Ç–≤–µ—è –≤ localStorage
            const hasMatveyStar = userStars.some(star => star.name === "–ú–∞—Ç–≤–µ–π –õ–µ–≤—á–µ–Ω–∫–æ");
            
            // –ï—Å–ª–∏ –∑–≤–µ–∑–¥—ã –ú–∞—Ç–≤–µ—è –Ω–µ—Ç –≤ localStorage, –¥–æ–±–∞–≤–ª—è–µ–º –µ—ë
            if (!hasMatveyStar) {
                const matveyStarData = {
                    name: "–ú–∞—Ç–≤–µ–π –õ–µ–≤—á–µ–Ω–∫–æ",
                    class: "6",
                    value: "–°–ø—Ä–∞–≤–µ–¥–ª–∏–≤–æ—Å—Ç—å",
                    reason: "–°–ø—Ä–∞–≤–µ–¥–ª–∏–≤–æ—Å—Ç—å —Å–æ–∑–¥–∞—ë—Ç –≥–∞—Ä–º–æ–Ω–∏—é –≤ –æ–±—â–µ—Å—Ç–≤–µ –∏ –ø–æ–∑–≤–æ–ª—è–µ—Ç –∫–∞–∂–¥–æ–º—É —á—É–≤—Å—Ç–≤–æ–≤–∞—Ç—å —Å–µ–±—è –∑–∞—â–∏—â—ë–Ω–Ω—ã–º",
                    timestamp: new Date().toISOString(),
                    source: 'system',
                    isMatvey: true
                };
                
                userStars.unshift(matveyStarData); // –î–æ–±–∞–≤–ª—è–µ–º –≤ –Ω–∞—á–∞–ª–æ
                localStorage.setItem('gymnasiumValues', JSON.stringify(userStars));
            }
            
            // –ó–∞–≥—Ä—É–∂–∞–µ–º –≤—Å–µ –∑–≤—ë–∑–¥—ã –∏–∑ localStorage
            userStars.forEach((starData, index) => {
                // –ï—Å–ª–∏ —ç—Ç–æ –∑–≤–µ–∑–¥–∞ –ú–∞—Ç–≤–µ—è, –ø–æ–º–µ—â–∞–µ–º –µ—ë –≤ —Ü–µ–Ω—Ç—Ä
                if (starData.name === "–ú–∞—Ç–≤–µ–π –õ–µ–≤—á–µ–Ω–∫–æ") {
                    addMatveyStar(starData);
                } else {
                    // –û—Å—Ç–∞–ª—å–Ω—ã–µ –∑–≤—ë–∑–¥—ã —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—è–µ–º —Ä–∞–≤–Ω–æ–º–µ—Ä–Ω–æ
                    addStarToGalaxy(starData, 2000 + index);
                }
            });
        }
        
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –∑–≤–µ–∑–¥—ã –ú–∞—Ç–≤–µ—è –≤ —Ü–µ–Ω—Ç—Ä
        function addMatveyStar(starData) {
            const width = canvas.width / devicePixelRatio;
            const height = canvas.height / devicePixelRatio;
            const centerX = width / 2;
            const centerY = height / 2;
            
            // –£–¥–∞–ª—è–µ–º —Å—Ç–∞—Ä—ã–µ –∑–≤–µ–∑–¥—ã –ú–∞—Ç–≤–µ—è, –µ—Å–ª–∏ –æ–Ω–∏ –µ—Å—Ç—å
            stars = stars.filter(star => !star.isMatvey);
            
            stars.push({
                id: 999,
                x: centerX,
                y: centerY,
                originalX: centerX,
                originalY: centerY,
                baseSize: 6,
                currentSize: 6,
                targetSize: 6,
                color: CONFIG.VALUE_COLORS[starData.value] || CONFIG.VALUE_COLORS['–°–ø—Ä–∞–≤–µ–¥–ª–∏–≤–æ—Å—Ç—å'],
                name: starData.name,
                class: "6 –∫–ª–∞—Å—Å",
                value: starData.value,
                reason: starData.reason,
                speed: 0.02,
                angle: Math.random() * Math.PI * 2,
                rotation: 0,
                rotationSpeed: 0.005,
                pulse: Math.random() * Math.PI * 2,
                pulseSpeed: 0.005,
                glow: 1.5,
                targetGlow: 1.5,
                hoverScale: 1,
                targetHoverScale: 1,
                isHovered: false,
                isUserStar: true,
                isMatvey: true,
                distanceToMouse: Infinity,
                lastClickTime: 0,
                twinkle: Math.random() * Math.PI * 2,
                twinkleSpeed: 0.005
            });
        }
        
        // –£–õ–£–ß–®–ï–ù–ù–ê–Ø –§–£–ù–ö–¶–ò–Ø - –≥–∞—Ä–º–æ–Ω–∏—á–Ω–æ–µ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∑–≤—ë–∑–¥
        function addStarToGalaxy(starData, id) {
            // –ü—Ä–æ–ø—É—Å–∫–∞–µ–º –∑–≤–µ–∑–¥—É –ú–∞—Ç–≤–µ—è, –æ–Ω–∞ —É–∂–µ –¥–æ–±–∞–≤–ª–µ–Ω–∞
            if (starData.name === "–ú–∞—Ç–≤–µ–π –õ–µ–≤—á–µ–Ω–∫–æ") return;
            
            const size = CONFIG.MIN_STAR_SIZE + Math.random() * (CONFIG.MAX_STAR_SIZE - CONFIG.MIN_STAR_SIZE);
            const width = canvas.width / devicePixelRatio;
            const height = canvas.height / devicePixelRatio;
            
            let attempts = 0;
            let x, y;
            let positionFound = false;
            
            // –ü—ã—Ç–∞–µ–º—Å—è –Ω–∞–π—Ç–∏ —Ö–æ—Ä–æ—à—É—é –ø–æ–∑–∏—Ü–∏—é
            while (!positionFound && attempts < 100) {
                // –†–∞–≤–Ω–æ–º–µ—Ä–Ω–æ–µ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–æ –≤—Å–µ–º—É —ç–∫—Ä–∞–Ω—É —Å —É—á—ë—Ç–æ–º UI —ç–ª–µ–º–µ–Ω—Ç–æ–≤
                const margin = 150; // –û—Ç—Å—Ç—É–ø –æ—Ç –∫—Ä–∞—ë–≤ –¥–ª—è UI
                const safeAreaX = width - 2 * margin;
                const safeAreaY = height - 2 * margin;
                
                x = margin + Math.random() * safeAreaX;
                y = margin + Math.random() * safeAreaY;
                
                // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ–±—ã –Ω–µ –ø–æ–ø–∞—Å—Ç—å –Ω–∞ –∑–∞–≥–æ–ª–æ–≤–æ–∫ (–≤–µ—Ä—Ö–Ω—è—è —á–∞—Å—Ç—å)
                const headerArea = 200;
                const controlsArea = height - 250;
                
                // –ï—Å–ª–∏ –ø–æ–ø–∞–¥–∞–µ–º –≤ –∑–æ–Ω—É –∑–∞–≥–æ–ª–æ–≤–∫–∞ –∏–ª–∏ –∫–Ω–æ–ø–æ–∫, –ø—Ä–æ–±—É–µ–º –µ—â—ë
                if (y < headerArea || y > controlsArea) {
                    attempts++;
                    continue;
                }
                
                // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ –¥–æ –¥—Ä—É–≥–∏—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –∑–≤—ë–∑–¥
                let tooClose = false;
                const minDistance = 80; // –ú–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ –º–µ–∂–¥—É –∑–≤—ë–∑–¥–∞–º–∏
                
                for (let star of stars) {
                    if (star.isUserStar && !star.isMatvey) { // –ù–µ –ø—Ä–æ–≤–µ—Ä—è–µ–º —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ –¥–æ –∑–≤–µ–∑–¥—ã –ú–∞—Ç–≤–µ—è
                        const dx = x - star.x;
                        const dy = y - star.y;
                        const distance = Math.sqrt(dx * dx + dy * dy);
                        
                        if (distance < minDistance) {
                            tooClose = true;
                            break;
                        }
                    }
                }
                
                if (!tooClose) {
                    positionFound = true;
                }
                
                attempts++;
            }
            
            // –ï—Å–ª–∏ –Ω–µ –Ω–∞—à–ª–∏ —Ö–æ—Ä–æ—à—É—é –ø–æ–∑–∏—Ü–∏—é, —Å—Ç–∞–≤–∏–º —Å–ª—É—á–∞–π–Ω–æ (–Ω–æ –Ω–µ –≤ —Å–∞–º–æ–º —Ü–µ–Ω—Ç—Ä–µ)
            if (!positionFound) {
                const centerX = width / 2;
                const centerY = height / 2;
                const avoidRadius = 200; // –ù–µ —Å—Ç–∞–≤–∏–º —Å–ª–∏—à–∫–æ–º –±–ª–∏–∑–∫–æ –∫ —Ü–µ–Ω—Ç—Ä—É
                
                do {
                    x = Math.random() * width;
                    y = Math.random() * height;
                } while (
                    Math.abs(x - centerX) < avoidRadius && 
                    Math.abs(y - centerY) < avoidRadius &&
                    attempts++ < 50
                );
            }
            
            stars.push({
                id: id,
                x: x,
                y: y,
                originalX: x,
                originalY: y,
                baseSize: size,
                currentSize: 0,
                targetSize: size,
                color: CONFIG.VALUE_COLORS[starData.value] || CONFIG.VALUE_COLORS['–î—Ä—É–≥–æ–π'],
                name: starData.name,
                class: starData.class + ' –∫–ª–∞—Å—Å',
                value: starData.value,
                reason: starData.reason,
                speed: 0.02 + Math.random() * 0.1,
                angle: Math.random() * Math.PI * 2,
                rotation: 0,
                rotationSpeed: (Math.random() - 0.5) * 0.01,
                pulse: Math.random() * Math.PI * 2,
                pulseSpeed: 0.005 + Math.random() * 0.01,
                glow: 0,
                targetGlow: 1.0,
                hoverScale: 1,
                targetHoverScale: 1,
                isHovered: false,
                isUserStar: true,
                isMatvey: false,
                distanceToMouse: Infinity,
                lastClickTime: 0,
                twinkle: Math.random() * Math.PI * 2,
                twinkleSpeed: 0.005 + Math.random() * 0.01
            });
            
            createAppearanceEffect({ x, y, color: CONFIG.VALUE_COLORS[starData.value] || CONFIG.VALUE_COLORS['–î—Ä—É–≥–æ–π'] });
        }
        
        function createBackgroundStars(count) {
            for (let i = 0; i < count; i++) {
                particles.push({
                    x: Math.random() * canvas.width / devicePixelRatio,
                    y: Math.random() * canvas.height / devicePixelRatio,
                    size: Math.random() * 1.5,
                    brightness: 0.1 + Math.random() * 0.5,
                    speed: 0.01 + Math.random() * 0.05,
                    twinkle: Math.random() * Math.PI * 2,
                    twinkleSpeed: 0.003 + Math.random() * 0.007
                });
            }
        }
        
        function handleMouseMove(event) {
            const rect = canvas.getBoundingClientRect();
            mouseX = (event.clientX - rect.left) * (canvas.width / devicePixelRatio / rect.width);
            mouseY = (event.clientY - rect.top) * (canvas.height / devicePixelRatio / rect.height);
            
            cursorGlow.style.left = (event.clientX - 40) + 'px';
            cursorGlow.style.top = (event.clientY - 40) + 'px';
            cursorGlow.style.opacity = '0.7';
            
            if (hoveredStar) {
                hoveredStar.isHovered = false;
                hoveredStar.targetHoverScale = 1;
                hoveredStar.targetGlow = hoveredStar.isUserStar ? (hoveredStar.isMatvey ? 1.5 : 1.0) : 0;
                hoveredStar = null;
            }
            
            tooltip.style.opacity = '0';
            
            let closestStar = null;
            let minDistance = Infinity;
            
            for (let i = 0; i < stars.length; i++) {
                const star = stars[i];
                const dx = mouseX - star.x;
                const dy = mouseY - star.y;
                const distance = Math.sqrt(dx * dx + dy * dy);
                const hoverRadius = star.currentSize * 20;
                
                star.distanceToMouse = distance;
                
                if (distance < hoverRadius && distance < minDistance) {
                    minDistance = distance;
                    closestStar = star;
                }
            }
            
            if (closestStar) {
                closestStar.isHovered = true;
                closestStar.targetHoverScale = CONFIG.HOVER_SCALE;
                closestStar.targetGlow = CONFIG.HOVER_GLOW_INTENSITY;
                hoveredStar = closestStar;
                
                showTooltip(closestStar, event);
                
                cursorGlow.style.opacity = '1';
                cursorGlow.style.background = `radial-gradient(circle, ${closestStar.color}90 0%, transparent 70%)`;
                cursorGlow.style.width = '100px';
                cursorGlow.style.height = '100px';
                cursorGlow.style.left = (event.clientX - 50) + 'px';
                cursorGlow.style.top = (event.clientY - 50) + 'px';
            }
        }
        
        function handleTouch(event) {
            if (event.touches.length === 1) {
                const touch = event.touches[0];
                const rect = canvas.getBoundingClientRect();
                const x = (touch.clientX - rect.left) * (canvas.width / devicePixelRatio / rect.width);
                const y = (touch.clientY - rect.top) * (canvas.height / devicePixelRatio / rect.height);
                
                handleTouchMove(x, y, touch);
            }
        }
        
        function handleTouchMove(x, y, touch) {
            let closestStar = null;
            let minDistance = Infinity;
            
            for (let i = 0; i < stars.length; i++) {
                const star = stars[i];
                const dx = x - star.x;
                const dy = y - star.y;
                const distance = Math.sqrt(dx * dx + dy * dy);
                const hoverRadius = star.currentSize * 25;
                
                if (distance < hoverRadius && distance < minDistance) {
                    minDistance = distance;
                    closestStar = star;
                }
            }
            
            if (closestStar && closestStar.isUserStar) {
                showMobileTooltip(closestStar, touch);
            }
        }
        
        function showMobileTooltip(star, touch) {
            tooltip.innerHTML = `
                <div class="star-name">‚≠ê ${star.name}</div>
                <div class="star-info"><strong>–ö–ª–∞—Å—Å:</strong> ${star.class}</div>
                <div class="star-info"><strong>–¶–µ–Ω–Ω–æ—Å—Ç—å:</strong> ${star.value}</div>
                <div class="star-info"><strong>–ü–æ—á–µ–º—É –≤–∞–∂–Ω–æ:</strong> ${star.reason}</div>
                ${star.isMatvey ? '<div class="star-info" style="color:#ffd700; margin-top:10px;">‚òÖ –ê–≤—Ç–æ—Ä –ø—Ä–æ–µ–∫—Ç–∞</div>' : ''}
            `;
            
            let x = touch.clientX;
            let y = touch.clientY - 200;
            
            if (y < 50) y = touch.clientY + 50;
            if (x + tooltip.offsetWidth > window.innerWidth) x = window.innerWidth - tooltip.offsetWidth - 20;
            if (x < 20) x = 20;
            
            tooltip.style.left = x + 'px';
            tooltip.style.top = y + 'px';
            tooltip.style.opacity = '1';
            
            setTimeout(() => tooltip.style.opacity = '0', 3000);
        }
        
        function handleMouseLeave() {
            if (hoveredStar) {
                hoveredStar.isHovered = false;
                hoveredStar.targetHoverScale = 1;
                hoveredStar.targetGlow = hoveredStar.isUserStar ? (hoveredStar.isMatvey ? 1.5 : 1.0) : 0;
                hoveredStar = null;
            }
            tooltip.style.opacity = '0';
            cursorGlow.style.opacity = '0';
        }
        
        function handleStarClick(event) {
            if (hoveredStar && hoveredStar.isUserStar) {
                const now = Date.now();
                if (now - hoveredStar.lastClickTime < 300) {
                    createExplosion(hoveredStar);
                } else {
                    hoveredStar.targetGlow = CONFIG.HOVER_GLOW_INTENSITY * 2;
                    setTimeout(() => {
                        if (hoveredStar) hoveredStar.targetGlow = CONFIG.HOVER_GLOW_INTENSITY;
                    }, 400);
                }
                hoveredStar.lastClickTime = now;
            }
        }
        
        function showTooltip(star, event) {
            tooltip.innerHTML = star.isUserStar ? `
                <div class="star-name">‚≠ê ${star.name}</div>
                <div class="star-info"><strong>–ö–ª–∞—Å—Å:</strong> ${star.class}</div>
                <div class="star-info"><strong>–¶–µ–Ω–Ω–æ—Å—Ç—å:</strong> ${star.value}</div>
                <div class="star-info"><strong>–ü–æ—á–µ–º—É –≤–∞–∂–Ω–æ:</strong> ${star.reason}</div>
                ${star.isMatvey ? '<div class="star-info" style="color:#ffd700; margin-top:10px;">‚òÖ –ê–≤—Ç–æ—Ä –ø—Ä–æ–µ–∫—Ç–∞</div>' : ''}
            ` : `
                <div class="star-name">‚ú® –ó–≤–µ–∑–¥–∞ –≥–∞–ª–∞–∫—Ç–∏–∫–∏</div>
                <div class="star-info">–ù–∞–∂–º–∏ "–î–æ–±–∞–≤–∏—Ç—å —Å–≤–æ—é –∑–≤–µ–∑–¥—É", —á—Ç–æ–±—ã –ø–æ–¥–µ–ª–∏—Ç—å—Å—è —Å–≤–æ–µ–π —Ü–µ–Ω–Ω–æ—Å—Ç—å—é!</div>
            `;
            
            let x = event.clientX + 30;
            let y = event.clientY + 30;
            
            if (x + tooltip.offsetWidth > window.innerWidth) x = event.clientX - tooltip.offsetWidth - 30;
            if (y + tooltip.offsetHeight > window.innerHeight) y = event.clientY - tooltip.offsetHeight - 30;
            
            tooltip.style.left = x + 'px';
            tooltip.style.top = y + 'px';
            tooltip.style.opacity = '1';
        }
        
        function drawStar(star, time) {
            star.twinkle += star.twinkleSpeed;
            const twinkleFactor = 0.7 + Math.sin(star.twinkle) * 0.3 * CONFIG.TWINKLE_AMPLITUDE;
            
            const pulse = Math.sin(star.pulse) * 0.3 * twinkleFactor + 0.7;
            const size = star.currentSize * pulse * star.hoverScale;
            
            if (star.isUserStar) {
                const specialGlowSize = size * (star.isMatvey ? 5 : 4); // –ó–≤–µ–∑–¥–∞ –ú–∞—Ç–≤–µ—è —Å–≤–µ—Ç–∏—Ç —è—Ä—á–µ
                const gradient = ctx.createRadialGradient(star.x, star.y, 0, star.x, star.y, specialGlowSize);
                gradient.addColorStop(0, star.color + 'ff');
                gradient.addColorStop(0.4, star.color + 'aa');
                gradient.addColorStop(0.7, star.color + '44');
                gradient.addColorStop(1, star.color + '00');
                
                ctx.fillStyle = gradient;
                ctx.beginPath();
                ctx.arc(star.x, star.y, specialGlowSize, 0, Math.PI * 2);
                ctx.fill();
            }
            
            if (star.glow > 0.1) {
                const glowSize = size * (2 + star.glow * 1.5);
                const gradient = ctx.createRadialGradient(star.x, star.y, 0, star.x, star.y, glowSize);
                
                if (star.isHovered) {
                    gradient.addColorStop(0, star.color + 'ff');
                    gradient.addColorStop(0.3, star.color + 'aa');
                    gradient.addColorStop(0.6, star.color + '44');
                    gradient.addColorStop(1, star.color + '00');
                } else {
                    gradient.addColorStop(0, star.color + 'cc');
                    gradient.addColorStop(0.5, star.color + '44');
                    gradient.addColorStop(1, star.color + '00');
                }
                
                ctx.fillStyle = gradient;
                ctx.beginPath();
                ctx.arc(star.x, star.y, glowSize, 0, Math.PI * 2);
                ctx.fill();
            }
            
            ctx.save();
            ctx.translate(star.x, star.y);
            ctx.rotate(star.rotation);
            
            const outerRadius = size;
            const innerRadius = size * 0.4;
            
            const starGradient = ctx.createRadialGradient(0, 0, 0, 0, 0, outerRadius);
            starGradient.addColorStop(0, star.color);
            starGradient.addColorStop(0.8, star.color);
            starGradient.addColorStop(1, star.color + 'cc');
            
            ctx.fillStyle = starGradient;
            ctx.beginPath();
            
            for (let i = 0; i < 10; i++) {
                const angle = (Math.PI * i) / 5;
                const radius = i % 2 === 0 ? outerRadius : innerRadius;
                const x = Math.cos(angle) * radius;
                const y = Math.sin(angle) * radius;
                
                if (i === 0) ctx.moveTo(x, y);
                else ctx.lineTo(x, y);
            }
            
            ctx.closePath();
            ctx.fill();
            
            ctx.strokeStyle = '#ffffff';
            ctx.lineWidth = 1.2;
            ctx.stroke();
            
            ctx.fillStyle = star.isUserStar ? '#ffffff' : '#ffffaa';
            ctx.beginPath();
            ctx.arc(0, 0, size * 0.25, 0, Math.PI * 2);
            ctx.fill();
            
            ctx.restore();
            
            if (!('ontouchstart' in window) && star.isHovered && star.isUserStar) {
                ctx.fillStyle = '#ffdd00';
                ctx.font = `bold ${Math.max(14, size * 2)}px Arial`;
                ctx.textAlign = 'center';
                ctx.textBaseline = 'bottom';
                ctx.shadowColor = '#000';
                ctx.shadowBlur = 4;
                ctx.fillText(star.name, star.x, star.y - size - 5);
                ctx.shadowBlur = 0;
            }
        }
        
        function createExplosion(star) {
            for (let i = 0; i < 30; i++) {
                const angle = Math.random() * Math.PI * 2;
                const speed = 1 + Math.random() * 2;
                const size = 1 + Math.random() * 3;
                
                particles.push({
                    x: star.x,
                    y: star.y,
                    size: size,
                    color: star.color,
                    brightness: 1,
                    speed: speed,
                    angle: angle,
                    life: 1,
                    decay: 0.02 + Math.random() * 0.02,
                    type: 'explosion'
                });
            }
        }
        
        function createAppearanceEffect(star) {
            for (let i = 0; i < 15; i++) {
                const angle = Math.random() * Math.PI * 2;
                const speed = 0.5 + Math.random() * 1.5;
                const size = 1 + Math.random() * 2;
                
                particles.push({
                    x: star.x,
                    y: star.y,
                    size: size,
                    color: star.color,
                    brightness: 1,
                    speed: speed,
                    angle: angle,
                    life: 1,
                    decay: 0.03 + Math.random() * 0.02,
                    type: 'appearance'
                });
            }
        }
        
        function drawBackgroundStars() {
            particles.forEach(p => {
                p.twinkle += p.twinkleSpeed;
                const brightness = p.brightness * (0.6 + Math.sin(p.twinkle) * 0.4);
                
                if (!p.type) {
                    p.x -= p.speed;
                    if (p.x < -10) {
                        p.x = canvas.width / devicePixelRatio + 10;
                        p.y = Math.random() * canvas.height / devicePixelRatio;
                    }
                } else if (p.type === 'explosion' || p.type === 'appearance') {
                    p.x += Math.cos(p.angle) * p.speed;
                    p.y += Math.sin(p.angle) * p.speed;
                    p.life -= p.decay;
                    p.brightness = p.life;
                }
                
                if (p.life > 0) {
                    const alpha = brightness;
                    if (p.type) {
                        ctx.fillStyle = p.color + Math.floor(alpha * 255).toString(16).padStart(2, '0');
                    } else {
                        ctx.fillStyle = `rgba(255, 255, 255, ${alpha})`;
                    }
                    ctx.beginPath();
                    ctx.arc(p.x, p.y, p.size, 0, Math.PI * 2);
                    ctx.fill();
                }
            });
            
            particles = particles.filter(p => !p.type || p.life > 0);
        }
        
        function animate() {
            animationId = requestAnimationFrame(animate);
            
            // –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö
            if (window.innerWidth < 768) {
                const now = Date.now();
                if (now - (animate.lastTime || 0) < 1000 / 30) return;
                animate.lastTime = now;
            }
            
            ctx.clearRect(0, 0, canvas.width / devicePixelRatio, canvas.height / devicePixelRatio);
            
            // –ì—Ä–∞–¥–∏–µ–Ω—Ç–Ω—ã–π —Ñ–æ–Ω
            const gradient = ctx.createLinearGradient(0, 0, 0, canvas.height / devicePixelRatio);
            gradient.addColorStop(0, '#000010');
            gradient.addColorStop(1, '#0a001a');
            ctx.fillStyle = gradient;
            ctx.fillRect(0, 0, canvas.width / devicePixelRatio, canvas.height / devicePixelRatio);
            
            drawBackgroundStars();
            
            const time = Date.now() * 0.001;
            updateStars(time);
        }
        
        function updateStars(time) {
            for (let i = 0; i < stars.length; i++) {
                const star = stars[i];
                
                star.currentSize += (star.targetSize - star.currentSize) * 0.1;
                star.hoverScale += (star.targetHoverScale - star.hoverScale) * 0.15;
                star.glow += (star.targetGlow - star.glow) * 0.1;
                
                star.pulse += star.pulseSpeed;
                star.rotation += star.rotationSpeed;
                
                // –†–∞–∑–Ω–∞—è –∞–º–ø–ª–∏—Ç—É–¥–∞ –¥–≤–∏–∂–µ–Ω–∏—è –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –∑–≤—ë–∑–¥
                let orbitRadius;
                if (star.isMatvey) {
                    orbitRadius = 8; // –ú–µ–Ω—å—à–µ–µ –¥–≤–∏–∂–µ–Ω–∏–µ –¥–ª—è —Ü–µ–Ω—Ç—Ä–∞–ª—å–Ω–æ–π –∑–≤–µ–∑–¥—ã
                } else if (star.isUserStar) {
                    orbitRadius = 12 + (i % 6); // –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –∑–≤—ë–∑–¥—ã
                } else {
                    orbitRadius = 15 + (i % 8) * 3; // –§–æ–Ω–æ–≤—ã–µ –∑–≤—ë–∑–¥—ã
                }
                
                star.x = star.originalX + Math.cos(time * 0.2 + i * 0.05) * orbitRadius;
                star.y = star.originalY + Math.sin(time * 0.15 + i * 0.05) * orbitRadius * 0.7;
                
                drawStar(star, time);
            }
        }
        
        function optimizeForMobile() {
            particles = particles.slice(0, 200);
            if (stars.length > 30) stars = stars.slice(0, 30);
            CONFIG.HOVER_GLOW_INTENSITY = 1.5;
            CONFIG.BACKGROUND_STARS = 150;
        }
        
        function setupForm() {
            const form = document.getElementById('starForm');
            const valueOptions = document.querySelectorAll('.value-option');
            const customValueInput = document.getElementById('customValue');
            const selectedValueInput = document.getElementById('selectedValue');
            const otherOption = document.getElementById('otherOption');
            
            valueOptions.forEach(option => {
                option.addEventListener('click', function() {
                    valueOptions.forEach(opt => opt.classList.remove('selected'));
                    this.classList.add('selected');
                    
                    if (this === otherOption) {
                        customValueInput.style.display = 'block';
                        selectedValueInput.value = '';
                        customValueInput.focus();
                    } else {
                        customValueInput.style.display = 'none';
                        selectedValueInput.value = this.dataset.value;
                    }
                });
                
                // –î–æ–±–∞–≤–ª—è–µ–º –∫–ª–∞–≤–∏–∞—Ç—É—Ä–Ω—É—é –Ω–∞–≤–∏–≥–∞—Ü–∏—é
                option.addEventListener('keydown', function(e) {
                    if (e.key === 'Enter' || e.key === ' ') {
                        e.preventDefault();
                        this.click();
                    }
                });
            });
            
            customValueInput.addEventListener('input', function() {
                selectedValueInput.value = this.value;
                
                // –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–≤–æ–¥–∏—Ç —Å–≤–æ—é —Ü–µ–Ω–Ω–æ—Å—Ç—å, –≤—ã–±–∏—Ä–∞–µ–º –æ–ø—Ü–∏—é "–î—Ä—É–≥–æ–π –≤–∞—Ä–∏–∞–Ω—Ç"
                if (this.value.trim()) {
                    valueOptions.forEach(opt => opt.classList.remove('selected'));
                    otherOption.classList.add('selected');
                    customValueInput.style.display = 'block';
                }
            });
            
            form.addEventListener('submit', function(e) {
                e.preventDefault();
                
                const name = document.getElementById('studentName').value.trim();
                const studentClass = document.getElementById('studentClass').value;
                const value = selectedValueInput.value.trim();
                const reason = document.getElementById('valueReason').value.trim();
                
                if (!name || !studentClass || !value || !reason) {
                    showNotification('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∑–∞–ø–æ–ª–Ω–∏ –≤—Å–µ –ø–æ–ª—è!', 'error');
                    return;
                }
                
                const starData = {
                    name: name,
                    class: studentClass,
                    value: value,
                    reason: reason,
                    timestamp: new Date().toISOString(),
                    source: 'website'
                };
                
                userStars.push(starData);
                localStorage.setItem('gymnasiumValues', JSON.stringify(userStars));
                
                // –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –¥–æ–±–∞–≤–ª—è–µ—Ç –∑–≤–µ–∑–¥—É —Å –∏–º–µ–Ω–µ–º "–ú–∞—Ç–≤–µ–π –õ–µ–≤—á–µ–Ω–∫–æ", –æ–±–Ω–æ–≤–ª—è–µ–º —Ü–µ–Ω—Ç—Ä–∞–ª—å–Ω—É—é –∑–≤–µ–∑–¥—É
                if (name === "–ú–∞—Ç–≤–µ–π –õ–µ–≤—á–µ–Ω–∫–æ") {
                    addMatveyStar(starData);
                } else {
                    addStarToGalaxy(starData, 3000 + userStars.length);
                }
                
                closeForm();
                showNotification('–¢–≤–æ—è –∑–≤–µ–∑–¥–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∞ –≤ –ª–∏—á–Ω—É—é –≥–∞–ª–∞–∫—Ç–∏–∫—É! ‚ú®', 'success');
                
                updateStats();
                
                form.reset();
                valueOptions.forEach(opt => opt.classList.remove('selected'));
                customValueInput.style.display = 'none';
                customValueInput.value = '';
                selectedValueInput.value = '';
            });
        }
        
        function showNotification(message, type = 'success') {
            const notification = document.createElement('div');
            const bgColor = type === 'success' ? 'linear-gradient(45deg, #32cd32, #00ced1)' : 
                           type === 'error' ? 'linear-gradient(45deg, #ff4444, #ff8c00)' :
                           'linear-gradient(45deg, #4169e1, #8a2be2)';
            
            notification.style.cssText = `
                position: fixed;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%);
                background: ${bgColor};
                color: ${type === 'success' ? 'black' : 'white'};
                padding: 20px 35px;
                border-radius: 15px;
                font-weight: bold;
                font-size: 18px;
                z-index: 10001;
                box-shadow: 0 10px 40px rgba(255, 221, 0, 0.5);
                text-align: center;
                animation: fadeInOut 3s ease-in-out;
                max-width: 90vw;
                word-break: break-word;
                pointer-events: none;
            `;
            
            const style = document.createElement('style');
            style.textContent = `
                @keyframes fadeInOut {
                    0% { opacity: 0; transform: translate(-50%, -50%) scale(0.8); }
                    10% { opacity: 1; transform: translate(-50%, -50%) scale(1.1); }
                    20% { transform: translate(-50%, -50%) scale(1); }
                    80% { opacity: 1; }
                    100% { opacity: 0; }
                }
            `;
            
            document.head.appendChild(style);
            notification.textContent = message;
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.remove();
                style.remove();
            }, 3000);
        }
        
        // –§—É–Ω–∫—Ü–∏–∏ –¥–ª—è –º–æ–¥–∞–ª—å–Ω—ã—Ö –æ–∫–æ–Ω
        window.openForm = function() {
            document.getElementById('formOverlay').style.display = 'flex';
            document.getElementById('studentName').focus();
        };
        
        window.closeForm = function() {
            document.getElementById('formOverlay').style.display = 'none';
        };
        
        window.openStats = function() {
            updateStats();
            document.getElementById('statsOverlay').style.display = 'flex';
        };
        
        window.closeStats = function() {
            document.getElementById('statsOverlay').style.display = 'none';
        };
        
        window.openInfo = function() {
            document.getElementById('infoOverlay').style.display = 'flex';
        };
        
        window.closeInfo = function() {
            document.getElementById('infoOverlay').style.display = 'none';
        };
        
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ—Ç–∫—Ä—ã—Ç–∏—è Google –§–æ—Ä–º—ã
        window.openGoogleForm = function() {
            if (CONFIG.GOOGLE_FORM_URL) {
                window.open(CONFIG.GOOGLE_FORM_URL, '_blank');
            } else {
                showNotification('–°—Å—ã–ª–∫–∞ –Ω–∞ Google –§–æ—Ä–º—É –±—É–¥–µ—Ç –¥–æ–±–∞–≤–ª–µ–Ω–∞ –ø–æ–∑–∂–µ. –°–ø—Ä–æ—Å–∏ —É –∫–ª–∞—Å—Å–Ω–æ–≥–æ —Ä—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª—è!', 'info');
            }
        };
        
        function updateStats() {
            const userStarsData = JSON.parse(localStorage.getItem('gymnasiumValues')) || [];
            
            // –§–∏–ª—å—Ç—Ä—É–µ–º —Ç–æ–ª—å–∫–æ –∑–≤–µ–∑–¥—ã —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–∏—Å–∫–ª—é—á–∞–µ–º –ú–∞—Ç–≤–µ—è)
            const myStars = userStarsData.filter(star => !star.isMatvey);
            
            // –û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –º–æ–∏—Ö –∑–≤—ë–∑–¥
            document.getElementById('totalStars').textContent = myStars.length;
            
            // –ú–æ–π –∫–ª–∞—Å—Å (–±–µ—Ä–µ–º –∏–∑ –ø–æ—Å–ª–µ–¥–Ω–µ–π –¥–æ–±–∞–≤–ª–µ–Ω–Ω–æ–π –∑–≤–µ–∑–¥—ã)
            if (myStars.length > 0) {
                const lastStar = myStars[myStars.length - 1];
                document.getElementById('myClass').textContent = lastStar.class + ' –∫–ª–∞—Å—Å';
            } else {
                document.getElementById('myClass').textContent = '-';
            }
            
            // –ú–æ—è –≥–ª–∞–≤–Ω–∞—è —Ü–µ–Ω–Ω–æ—Å—Ç—å (—Å–∞–º–∞—è —á–∞—Å—Ç–∞—è)
            if (myStars.length > 0) {
                const valueCount = {};
                myStars.forEach(star => {
                    valueCount[star.value] = (valueCount[star.value] || 0) + 1;
                });
                
                let mainValue = '-';
                let maxCount = 0;
                for (const [value, count] of Object.entries(valueCount)) {
                    if (count > maxCount) {
                        maxCount = count;
                        mainValue = value;
                    }
                }
                document.getElementById('myMainValue').textContent = mainValue;
            } else {
                document.getElementById('myMainValue').textContent = '-';
            }
            
            // –î–∞—Ç–∞ –ø–µ—Ä–≤–æ–≥–æ –≤–∫–ª–∞–¥–∞
            if (myStars.length > 0) {
                const firstStar = myStars.reduce((earliest, star) => {
                    return new Date(star.timestamp) < new Date(earliest.timestamp) ? star : earliest;
                });
                const date = new Date(firstStar.timestamp);
                document.getElementById('firstContribution').textContent = 
                    date.toLocaleDateString('ru-RU');
            } else {
                document.getElementById('firstContribution').textContent = '-';
            }
            
            // –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –º–æ–∏—Ö —Ü–µ–Ω–Ω–æ—Å—Ç–µ–π
            let myValuesDistributionHTML = '';
            if (myStars.length > 0) {
                const valueCount = {};
                myStars.forEach(star => {
                    valueCount[star.value] = (valueCount[star.value] || 0) + 1;
                });
                
                const sortedValues = Object.entries(valueCount).sort((a, b) => b[1] - a[1]);
                
                sortedValues.forEach(([value, count]) => {
                    const percentage = Math.round((count / myStars.length) * 100);
                    const color = CONFIG.VALUE_COLORS[value] || CONFIG.VALUE_COLORS['–î—Ä—É–≥–æ–π'];
                    myValuesDistributionHTML += `
                        <div class="distribution-item">
                            <span style="min-width: 140px; color: ${color};">${value}:</span>
                            <div style="flex: 1; height: 20px; background: rgba(255,255,255,0.1); border-radius: 10px; overflow: hidden; margin: 0 15px;">
                                <div style="height: 100%; width: ${Math.max(5, percentage)}%; background: linear-gradient(90deg, ${color}, ${color}aa); border-radius: 10px;"></div>
                            </div>
                            <span style="min-width: 80px; text-align: right; color: #aaddff;">${count} (${percentage}%)</span>
                        </div>
                    `;
                });
            } else {
                myValuesDistributionHTML = '<div style="color: #aaddff; text-align: center; padding: 20px;">–£ —Ç–µ–±—è –ø–æ–∫–∞ –Ω–µ—Ç –∑–≤—ë–∑–¥. –î–æ–±–∞–≤—å –ø–µ—Ä–≤—É—é!</div>';
            }
            document.getElementById('myValuesDistribution').innerHTML = myValuesDistributionHTML;
        }
        
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –∏–º–ø–æ—Ä—Ç–∞ –¥–∞–Ω–Ω—ã—Ö –∏–∑ Google Forms (–¥–ª—è –∞–¥–º–∏–Ω–∞)
        function importFromGoogleForms(data) {
            if (!Array.isArray(data)) return;
            
            let importedCount = 0;
            data.forEach(item => {
                // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –Ω–µ—Ç –ª–∏ —É–∂–µ —Ç–∞–∫–æ–π –∑–≤–µ–∑–¥—ã
                const exists = userStars.some(star => 
                    star.name === item.name && 
                    star.class === item.class && 
                    star.value === item.value
                );
                
                if (!exists) {
                    const starData = {
                        name: item.name,
                        class: item.class,
                        value: item.value,
                        reason: item.reason,
                        timestamp: new Date().toISOString(),
                        source: 'google_forms'
                    };
                    
                    userStars.push(starData);
                    
                    // –ï—Å–ª–∏ –∏–º–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç—Å—è –∑–≤–µ–∑–¥–∞ –ú–∞—Ç–≤–µ—è, –æ–±–Ω–æ–≤–ª—è–µ–º —Ü–µ–Ω—Ç—Ä–∞–ª—å–Ω—É—é
                    if (item.name === "–ú–∞—Ç–≤–µ–π –õ–µ–≤—á–µ–Ω–∫–æ") {
                        addMatveyStar(starData);
                    } else {
                        addStarToGalaxy(starData, 4000 + userStars.length);
                    }
                    
                    importedCount++;
                }
            });
            
            if (importedCount > 0) {
                localStorage.setItem('gymnasiumValues', JSON.stringify(userStars));
                updateStats();
                showNotification(`–ò–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–æ ${importedCount} –Ω–æ–≤—ã—Ö –∑–≤—ë–∑–¥! ‚ú®`, 'success');
            }
        }
        
        // –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –∞–≤—Ç–æ–∏–º–ø–æ—Ä—Ç (–ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã)
        function checkForAutoImport() {
            const urlParams = new URLSearchParams(window.location.search);
            if (urlParams.has('import')) {
                // –ó–¥–µ—Å—å –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –ª–æ–≥–∏–∫—É –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –∏–º–ø–æ—Ä—Ç–∞
                // –ù–∞–ø—Ä–∏–º–µ—Ä, –∑–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö –∏–∑ localStorage —Å –∫–ª—é—á–æ–º 'pending_import'
                const pendingData = localStorage.getItem('pending_google_forms_data');
                if (pendingData) {
                    try {
                        const data = JSON.parse(pendingData);
                        importFromGoogleForms(data);
                        localStorage.removeItem('pending_google_forms_data');
                    } catch (e) {
                        console.error('–û—à–∏–±–∫–∞ –∏–º–ø–æ—Ä—Ç–∞:', e);
                    }
                }
            }
        }
        
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏
        function showAdminPanel() {
            const adminData = prompt('–í–≤–µ–¥–∏—Ç–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è –∏–º–ø–æ—Ä—Ç–∞ (JSON):');
            if (adminData) {
                try {
                    const data = JSON.parse(adminData);
                    importFromGoogleForms(data);
                } catch (e) {
                    alert('–û—à–∏–±–∫–∞ –≤ —Ñ–æ—Ä–º–∞—Ç–µ –¥–∞–Ω–Ω—ã—Ö!');
                }
            }
        }
        
        // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å —Ç–æ–ª—å–∫–æ –ø—Ä–∏ —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ–º –ø–∞—Ä–∞–º–µ—Ç—Ä–µ
        if (window.location.search.includes('admin=true')) {
            document.getElementById('adminPanel').style.display = 'block';
        }
        
        // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –ø–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω–æ–≥–æ —Ä–µ–∂–∏–º–∞
        document.addEventListener('fullscreenchange', () => setupCanvas());
        document.addEventListener('webkitfullscreenchange', () => setupCanvas());
        
        // –û—á–∏—Å—Ç–∫–∞ –ø—Ä–∏ –∑–∞–∫—Ä—ã—Ç–∏–∏
        window.addEventListener('beforeunload', () => {
            if (animationId) cancelAnimationFrame(animationId);
        });
        
        // –ó–∞–ø—É—Å–∫
        window.addEventListener('load', init);
    </script>
</body>
</html>
